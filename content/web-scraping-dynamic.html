
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Web Scraping with Dynamic Pages &#8212; Python Users Group</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/main.css" />
    <link rel="stylesheet" type="text/css" href="../_static/ipynb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AWS &amp; Python" href="python-aws.html" />
    <link rel="prev" title="Web Scraping with Static Pages" href="web-scraping-static.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/ui-logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Python Users Group</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Python Users Group
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="why-python.html">
   Why Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="installation.html">
   Installing Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="intro-to-python.html">
   Intro to Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="intro-to-pandas.html">
   Intro to Pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="web-scraping-intro.html">
   Intro to Web Scraping
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="web-scraping-static.html">
   Web Scraping with Static Pages
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Web Scraping with Dynamic Pages
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="python-aws.html">
   AWS &amp; Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="technical-support.html">
   Technical Support
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="resources.html">
   Resources
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/UI-Research/python-at-urban/master?urlpath=tree/docs/content/web-scraping-dynamic.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/content/web-scraping-dynamic.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Web Scraping with Dynamic Pages
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-started">
     Getting Started
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-driver">
     The Driver
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#quick-refresher-on-functions">
     Quick refresher on functions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#click-button">
       Click Button
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#select-a-dropdown">
       Select a Dropdown
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#enter-text">
       Enter Text
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sometimes-to-move-forward-you-have-to-wait">
     Sometimes to move forward, you have to wait
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#function-arguments">
       Function Arguments
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#function-steps">
       Function Steps
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-note-on-dropdowns-and-text-boxes">
       A note on dropdowns and text boxes:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#workshop">
   WORKSHOP
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-1">
     TASK 1
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-1-solution">
     TASK 1 - SOLUTION
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-2">
     TASK 2
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-2-solution">
     TASK 2 SOLUTION
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#looking-ahead">
     Looking Ahead
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Web Scraping with Dynamic Pages</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Web Scraping with Dynamic Pages
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-started">
     Getting Started
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-driver">
     The Driver
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#quick-refresher-on-functions">
     Quick refresher on functions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#click-button">
       Click Button
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#select-a-dropdown">
       Select a Dropdown
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#enter-text">
       Enter Text
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sometimes-to-move-forward-you-have-to-wait">
     Sometimes to move forward, you have to wait
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#function-arguments">
       Function Arguments
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#function-steps">
       Function Steps
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-note-on-dropdowns-and-text-boxes">
       A note on dropdowns and text boxes:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#workshop">
   WORKSHOP
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-1">
     TASK 1
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-1-solution">
     TASK 1 - SOLUTION
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-2">
     TASK 2
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-2-solution">
     TASK 2 SOLUTION
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#looking-ahead">
     Looking Ahead
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="web-scraping-with-dynamic-pages">
<h1>Web Scraping with Dynamic Pages<a class="headerlink" href="#web-scraping-with-dynamic-pages" title="Permalink to this headline">#</a></h1>
<p>Dynamic web pages require a separate set of tools - either instead of or in addition to - what we covered in the last lesson. We’ll have to automate the actions that human web users would take when navigating a web page, such as clicking a button, selecting dropdown options, or entering text. This lesson will be an introduction to the <code class="docutils literal notranslate"><span class="pre">selenium</span></code> package in Python, which allows us to flexibly and powerfully interact with dynamic web pages.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h1>
<p>Today we’ll be digging into how to get started with a web scraping task and how to structure your thinking about approaching the task. For the remainder of the boot camp we’ll be working on scraping state-level health insurance premium values from the KFF <a class="reference external" href="https://www.kff.org/interactive/subsidy-calculator/">Health Insurance Marketplace Calculator</a>. In this example, the project team needs the cost of the Silver Plan Premium (without financial help) for each county for people aged 14, 20, 40, and 60. The final output should look something like this:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>State</p></th>
<th class="head"><p>County</p></th>
<th class="head"><p>Age 14</p></th>
<th class="head"><p>Age 20</p></th>
<th class="head"><p>Age 40</p></th>
<th class="head"><p>Age 60</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AL</p></td>
<td><p>St. Clair</p></td>
<td><p>281</p></td>
<td><p>434</p></td>
<td><p>566</p></td>
<td><p>1824</p></td>
</tr>
<tr class="row-odd"><td><p>AL</p></td>
<td><p>Jefferson</p></td>
<td><p>294</p></td>
<td><p>420</p></td>
<td><p>540</p></td>
<td><p>1830</p></td>
</tr>
<tr class="row-even"><td><p>AL</p></td>
<td><p>Shelby</p></td>
<td><p>273</p></td>
<td><p>451</p></td>
<td><p>589</p></td>
<td><p>1801</p></td>
</tr>
</tbody>
</table>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h2>
<p>First, let’s import some packages that we’ll need throughout the lesson (which you may need to install from the command line using <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">package_name</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.chrome.service</span> <span class="kn">import</span> <span class="n">Service</span> 
<span class="kn">from</span> <span class="nn">webdriver_manager.chrome</span> <span class="kn">import</span> <span class="n">ChromeDriverManager</span>
<span class="c1">## NOTE: Some users may want to try a Firefox Driver instead;</span>
<span class="c1">## Can comment above two lines and uncomment the below two lines</span>
<span class="c1"># from selenium.webdriver.firefox.service import Service</span>
<span class="c1"># from webdriver_manager.firefox import GeckoDriverManager</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="kn">import</span> <span class="n">Select</span><span class="p">,</span> <span class="n">WebDriverWait</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">time</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="the-driver">
<h2>The Driver<a class="headerlink" href="#the-driver" title="Permalink to this headline">#</a></h2>
<p>To start, we’ll need to launch a web browser that will be controlled by our python code, which is called a driver. First, we have a line that either installs the driver (in this case using a Chrome browser) or pulls a locally cached version if it’s already installed.</p>
<p>Next, we need to specify the URL that we want the driver to navigate to. The following chunk of code specifies that we want to navigate to the Health Insurance Marketplace Calculator, and then opens a web browser and navigates to the page.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">service</span> <span class="o">=</span> <span class="n">Service</span><span class="p">(</span><span class="n">executable_path</span><span class="o">=</span><span class="n">ChromeDriverManager</span><span class="p">()</span><span class="o">.</span><span class="n">install</span><span class="p">())</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">)</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://www.kff.org/interactive/subsidy-calculator/&quot;</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">SessionNotCreatedException</span><span class="g g-Whitespace">                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">service</span> <span class="o">=</span> <span class="n">Service</span><span class="p">(</span><span class="n">executable_path</span><span class="o">=</span><span class="n">ChromeDriverManager</span><span class="p">()</span><span class="o">.</span><span class="n">install</span><span class="p">())</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://www.kff.org/interactive/subsidy-calculator/&quot;</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/selenium/webdriver/chrome/webdriver.py:45,</span> in <span class="ni">WebDriver.__init__</span><span class="nt">(self, options, service, keep_alive)</span>
<span class="g g-Whitespace">     </span><span class="mi">42</span> <span class="n">service</span> <span class="o">=</span> <span class="n">service</span> <span class="k">if</span> <span class="n">service</span> <span class="k">else</span> <span class="n">Service</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">43</span> <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="k">if</span> <span class="n">options</span> <span class="k">else</span> <span class="n">Options</span><span class="p">()</span>
<span class="ne">---&gt; </span><span class="mi">45</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span>     <span class="n">browser_name</span><span class="o">=</span><span class="n">DesiredCapabilities</span><span class="o">.</span><span class="n">CHROME</span><span class="p">[</span><span class="s2">&quot;browserName&quot;</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span>     <span class="n">vendor_prefix</span><span class="o">=</span><span class="s2">&quot;goog&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span>     <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">49</span>     <span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span>     <span class="n">keep_alive</span><span class="o">=</span><span class="n">keep_alive</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">51</span> <span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/selenium/webdriver/chromium/webdriver.py:66,</span> in <span class="ni">ChromiumDriver.__init__</span><span class="nt">(self, browser_name, vendor_prefix, options, service, keep_alive)</span>
<span class="g g-Whitespace">     </span><span class="mi">57</span> <span class="n">executor</span> <span class="o">=</span> <span class="n">ChromiumRemoteConnection</span><span class="p">(</span>
<span class="g g-Whitespace">     </span><span class="mi">58</span>     <span class="n">remote_server_addr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">service_url</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">59</span>     <span class="n">browser_name</span><span class="o">=</span><span class="n">browser_name</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">62</span>     <span class="n">ignore_proxy</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">_ignore_local_proxy</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">63</span> <span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">65</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">66</span>     <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">command_executor</span><span class="o">=</span><span class="n">executor</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">67</span> <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">68</span>     <span class="bp">self</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/selenium/webdriver/remote/webdriver.py:208,</span> in <span class="ni">WebDriver.__init__</span><span class="nt">(self, command_executor, keep_alive, file_detector, options)</span>
<span class="g g-Whitespace">    </span><span class="mi">206</span> <span class="bp">self</span><span class="o">.</span><span class="n">_authenticator_id</span> <span class="o">=</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">207</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_client</span><span class="p">()</span>
<span class="ne">--&gt; </span><span class="mi">208</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_session</span><span class="p">(</span><span class="n">capabilities</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/selenium/webdriver/remote/webdriver.py:292,</span> in <span class="ni">WebDriver.start_session</span><span class="nt">(self, capabilities)</span>
<span class="g g-Whitespace">    </span><span class="mi">285</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;Creates a new session with the desired capabilities.</span>
<span class="g g-Whitespace">    </span><span class="mi">286</span><span class="sd"> </span>
<span class="g g-Whitespace">    </span><span class="mi">287</span><span class="sd"> :Args:</span>
<span class="g g-Whitespace">    </span><span class="mi">288</span><span class="sd">  - capabilities - a capabilities dict to start the session with.</span>
<span class="g g-Whitespace">    </span><span class="mi">289</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">291</span> <span class="n">caps</span> <span class="o">=</span> <span class="n">_create_caps</span><span class="p">(</span><span class="n">capabilities</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">292</span> <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">Command</span><span class="o">.</span><span class="n">NEW_SESSION</span><span class="p">,</span> <span class="n">caps</span><span class="p">)[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">293</span> <span class="bp">self</span><span class="o">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sessionId&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">294</span> <span class="bp">self</span><span class="o">.</span><span class="n">caps</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;capabilities&quot;</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/selenium/webdriver/remote/webdriver.py:347,</span> in <span class="ni">WebDriver.execute</span><span class="nt">(self, driver_command, params)</span>
<span class="g g-Whitespace">    </span><span class="mi">345</span> <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_executor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">driver_command</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">346</span> <span class="k">if</span> <span class="n">response</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">347</span>     <span class="bp">self</span><span class="o">.</span><span class="n">error_handler</span><span class="o">.</span><span class="n">check_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">348</span>     <span class="n">response</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unwrap_value</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="g g-Whitespace">    </span><span class="mi">349</span>     <span class="k">return</span> <span class="n">response</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/selenium/webdriver/remote/errorhandler.py:229,</span> in <span class="ni">ErrorHandler.check_response</span><span class="nt">(self, response)</span>
<span class="g g-Whitespace">    </span><span class="mi">227</span>         <span class="n">alert_text</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;alert&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">228</span>     <span class="k">raise</span> <span class="n">exception_class</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">screen</span><span class="p">,</span> <span class="n">stacktrace</span><span class="p">,</span> <span class="n">alert_text</span><span class="p">)</span>  <span class="c1"># type: ignore[call-arg]  # mypy is not smart enough here</span>
<span class="ne">--&gt; </span><span class="mi">229</span> <span class="k">raise</span> <span class="n">exception_class</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">screen</span><span class="p">,</span> <span class="n">stacktrace</span><span class="p">)</span>

<span class="ne">SessionNotCreatedException</span>: Message: session not created: Chrome failed to start: exited normally.
  <span class="p">(</span><span class="n">session</span> <span class="ow">not</span> <span class="n">created</span><span class="p">:</span> <span class="n">DevToolsActivePort</span> <span class="n">file</span> <span class="n">doesn</span><span class="s1">&#39;t exist)</span>
  <span class="p">(</span><span class="n">The</span> <span class="n">process</span> <span class="n">started</span> <span class="kn">from</span> <span class="nn">chrome</span> <span class="n">location</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">google</span><span class="o">/</span><span class="n">chrome</span><span class="o">/</span><span class="n">chrome</span> <span class="ow">is</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">running</span><span class="p">,</span> <span class="n">so</span> <span class="n">ChromeDriver</span> <span class="ow">is</span> <span class="n">assuming</span> <span class="n">that</span> <span class="n">Chrome</span> <span class="n">has</span> <span class="n">crashed</span><span class="o">.</span><span class="p">)</span>
<span class="ne">Stacktrace</span>:
<span class="c1">#0 0x5616bcd82cb3 &lt;unknown&gt;</span>
<span class="c1">#1 0x5616bca714a7 &lt;unknown&gt;</span>
<span class="c1">#2 0x5616bcaa5a26 &lt;unknown&gt;</span>
<span class="c1">#3 0x5616bcaa1980 &lt;unknown&gt;</span>
<span class="c1">#4 0x5616bcaea7b0 &lt;unknown&gt;</span>
<span class="c1">#5 0x5616bcade1b3 &lt;unknown&gt;</span>
<span class="c1">#6 0x5616bcaaf24a &lt;unknown&gt;</span>
<span class="c1">#7 0x5616bcaafc1e &lt;unknown&gt;</span>
<span class="c1">#8 0x5616bcd46fdb &lt;unknown&gt;</span>
<span class="c1">#9 0x5616bcd4af2b &lt;unknown&gt;</span>
<span class="c1">#10 0x5616bcd330f1 &lt;unknown&gt;</span>
<span class="c1">#11 0x5616bcd4ba92 &lt;unknown&gt;</span>
<span class="c1">#12 0x5616bcd17faf &lt;unknown&gt;</span>
<span class="c1">#13 0x5616bcd71e08 &lt;unknown&gt;</span>
<span class="c1">#14 0x5616bcd71fe0 &lt;unknown&gt;</span>
<span class="c1">#15 0x5616bcd81e04 &lt;unknown&gt;</span>
<span class="c1">#16 0x7f02b3094ac3 &lt;unknown&gt;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="quick-refresher-on-functions">
<h2>Quick refresher on functions<a class="headerlink" href="#quick-refresher-on-functions" title="Permalink to this headline">#</a></h2>
<p>A function is a block of code that can execute a particular action. The reason we use a function is to avoid copy and pasting the same code multiple times if we want to repeatedly execute that action. Functions can take in arguments from the user and can return a value.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">square_number</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">square_number</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>9
</pre></div>
</div>
</div>
</div>
<p>Looking through the website, there are drop down menus, select buttons, and text input that we’ll need to navigate. Based on the rule of “if a human needs to click something” we’ll need to use the <code class="docutils literal notranslate"><span class="pre">selenium</span></code> package. Luckily, this isn’t Urban’s first web scraping rodeo and we have sample code functions for completing each of these types of actions.</p>
<section id="click-button">
<h3>Click Button<a class="headerlink" href="#click-button" title="Permalink to this headline">#</a></h3>
<p>Use the function when you need to click a button on the page.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">click_button</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">driver</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>   
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This function waits until a button is clickable and then clicks on it.`</span>

<span class="sd">    Inputs:</span>
<span class="sd">        identifier (string): The Id, XPath, or other way of identifying the element to be clicked on</span>
<span class="sd">        by (By object): How to identify the identifier (Options include By.XPATH, By.ID, By.Name and others).</span>
<span class="sd">            Make sure &#39;by&#39; and &#39;identifier&#39; correspond to one other as they are used as a tuple pair below.</span>
<span class="sd">        timeout (int): How long to wait for the object to be clickable</span>

<span class="sd">    Returns:</span>
<span class="sd">        None (just clicks on button)</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">element_clickable</span> <span class="o">=</span> <span class="n">EC</span><span class="o">.</span><span class="n">element_to_be_clickable</span><span class="p">((</span><span class="n">by</span><span class="p">,</span> <span class="n">identifier</span><span class="p">))</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">element_clickable</span><span class="p">)</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s2">&quot;arguments[0].click();&quot;</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="select-a-dropdown">
<h3>Select a Dropdown<a class="headerlink" href="#select-a-dropdown" title="Permalink to this headline">#</a></h3>
<p>Use this function to select a value in a dropdown menu</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">select_dropdown</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">driver</span><span class="p">,</span>  <span class="n">by</span><span class="o">=</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This function clicks on the correct dropdown option in a dropdown object.</span>
<span class="sd">    It first waits until the element becomes selectable before locating the proper drop down menu. Then it selects the proper option.</span>
<span class="sd">    If the page doesn&#39;t load within 15 seconds, it will return a timeout message.</span>

<span class="sd">    Inputs:</span>
<span class="sd">        id (string): This is the HTML &#39;value&#39; of the dropdown menu to be selected, </span>
<span class="sd">            found through inspecting the web page.</span>
<span class="sd">        value (string): The value to select from the dropdown menu.</span>
<span class="sd">        index (int): If index is not None, function assumes we want to select an option by its index instead of by specific value. </span>
<span class="sd">            In this case, should specify that value = None.</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        None (just selects the right item in the dropdown menu)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">element_clickable</span> <span class="o">=</span> <span class="n">EC</span><span class="o">.</span><span class="n">element_to_be_clickable</span><span class="p">((</span><span class="n">by</span><span class="p">,</span> <span class="n">identifier</span><span class="p">))</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">element_clickable</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">Select</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="o">.</span><span class="n">select_by_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">option</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> 
        <span class="n">Select</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="o">.</span><span class="n">select_by_visible_text</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Select</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="o">.</span><span class="n">select_by_index</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="enter-text">
<h3>Enter Text<a class="headerlink" href="#enter-text" title="Permalink to this headline">#</a></h3>
<p>Use this function to enter text in a text box. the <code class="docutils literal notranslate"><span class="pre">enter_text</span></code> function is accompanied by the <code class="docutils literal notranslate"><span class="pre">is_textbox_empty</span></code> function to test is there is already a value in the text box. Later in the boot camp when we start to loop through variables, in some cases we’ll want to skip over the text box if there’s already text, in others we’ll want to make sure to clear the value first before we enter something else.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">enter_text</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">driver</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">):</span>
    <span class="n">element_clickable</span> <span class="o">=</span> <span class="n">EC</span><span class="o">.</span><span class="n">element_to_be_clickable</span><span class="p">((</span><span class="n">by</span><span class="p">,</span> <span class="n">identifier</span><span class="p">))</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">element_clickable</span><span class="p">)</span>
     <span class="c1"># Clear the text from the text box (zip code wasn&#39;t overwritting)</span>
    <span class="n">element</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">element</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_textbox_empty</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">textbox_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This function checks if a text box is empty</span>
<span class="sd">    Use this for the income variable so that we don&#39;t rewrite it</span>
<span class="sd">    every loop</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">textbox</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="s1">&#39;xpath&#39;</span><span class="p">,</span><span class="n">textbox_id</span><span class="p">)</span>
    <span class="n">textbox_value</span> <span class="o">=</span> <span class="n">textbox</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="n">textbox_value</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="sometimes-to-move-forward-you-have-to-wait">
<h2>Sometimes to move forward, you have to wait<a class="headerlink" href="#sometimes-to-move-forward-you-have-to-wait" title="Permalink to this headline">#</a></h2>
<p>Let’s dive into the <code class="docutils literal notranslate"><span class="pre">click_button</span></code> function so we have some intuition as to what’s going on. There are really only 3 lines, which speaks to how powerful the <code class="docutils literal notranslate"><span class="pre">selenium</span></code> package is.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">click_button</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">driver</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>   
    
    <span class="n">element_clickable</span> <span class="o">=</span> <span class="n">EC</span><span class="o">.</span><span class="n">element_to_be_clickable</span><span class="p">((</span><span class="n">by</span><span class="p">,</span> <span class="n">identifier</span><span class="p">))</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">element_clickable</span><span class="p">)</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s2">&quot;arguments[0].click();&quot;</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
</pre></div>
</div>
<section id="function-arguments">
<h3>Function Arguments<a class="headerlink" href="#function-arguments" title="Permalink to this headline">#</a></h3>
<p>First, let’s look at what we pass into the function. The <code class="docutils literal notranslate"><span class="pre">driver</span></code> is just the webdriver we specified earlier, which will never change. The <code class="docutils literal notranslate"><span class="pre">identifier</span></code> is some unique way to identify the button we want to click, and the <code class="docutils literal notranslate"><span class="pre">by</span></code> argument specifies <em>how</em> we identify that button. Let’s take a look at different ways we could identify the “SUBMIT” button on the page we launched before:</p>
<ul class="simple">
<li><p>XPATH is the default and is probably the easiest way to to identify a button, though might be computationally a little slower.</p></li>
<li><p>Finding an object by its ID is faster, but not all objects (including this one) have an ID.</p></li>
</ul>
<p>Using XPATH in this case, we can copy and paste the XPATH of the button from the page source and feed it in as the <code class="docutils literal notranslate"><span class="pre">identifier</span></code> argument.</p>
</section>
<section id="function-steps">
<h3>Function Steps<a class="headerlink" href="#function-steps" title="Permalink to this headline">#</a></h3>
<ol class="simple">
<li><p>The first line identifies the element we want to click based on the <code class="docutils literal notranslate"><span class="pre">identifier</span></code> and <code class="docutils literal notranslate"><span class="pre">by</span></code> arguments we discussed before.</p></li>
<li><p>The second line uses what we call an <strong>“implicit wait”</strong>, a hugely powerful part of <code class="docutils literal notranslate"><span class="pre">selenium</span></code>. The driver waits until the element we want is “clickable” on the webpage, which is crucial for dynamic web pages where elements might take time to load, especially when we repeatedly call the same page. What’s nice about implicit waits is that they wait <strong>only as long as they need to</strong>, or until a timeout is reached (in this case if it takes an element longer than 15 seconds to load, which means something is probably wrong). On the other hand, <strong>explicit waits</strong> pause the driver for some user-specified amount of time. We generally prefer implicit waits because they’re more efficient, though we’ll see how both have their place.</p></li>
<li><p>Finally, once the element is clickable, the third line actually executes the action to click the button.</p></li>
</ol>
</section>
<section id="a-note-on-dropdowns-and-text-boxes">
<h3>A note on dropdowns and text boxes:<a class="headerlink" href="#a-note-on-dropdowns-and-text-boxes" title="Permalink to this headline">#</a></h3>
<p>Unlike clicking a button, the other functions have one additional argument. For entering text, you obviously have to specify the text you want to enter. Dropdowns are slightly more complicated, because you have to indicate which dropdown option you want to select, which you can do by “value” or “index” upon inspecting the dropdown.</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="workshop">
<h1>WORKSHOP<a class="headerlink" href="#workshop" title="Permalink to this headline">#</a></h1>
<section id="task-1">
<h2>TASK 1<a class="headerlink" href="#task-1" title="Permalink to this headline">#</a></h2>
<p>Let’s make a list of the actions we’d need to take on the webpage in order to navigate to the health insurance premium values. We might call this “pseudocode” - no Python code needed here; just a list of steps that we want to convert to code.</p>
</section>
<section id="task-1-solution">
<h2>TASK 1 - SOLUTION<a class="headerlink" href="#task-1-solution" title="Permalink to this headline">#</a></h2>
<details>
<summary>Steps</summary>
1. Select dropdown - state
2. Enter text - zip code
3. Some zip codes cross counties, so in these cases, we also need to select the county dropdown
4. Enter text - yearly household income
5. Click button - whether coverage available from you or spouse's job
6. Select dropdown - number of people in family
7. Select dropdown - number of adults enrolling in coverage
8. Select dropdown - age
9. Select dropdown - # of children enrolling
10. Click button - "SUBMIT"
</details></section>
<section id="task-2">
<h2>TASK 2<a class="headerlink" href="#task-2" title="Permalink to this headline">#</a></h2>
<p>Taking the 10 steps above, let’s use the functions defined earlier to actually execute these ten steps. You can actually do this one step at a time, checking the browser opened by your driver to see if it clicked the correct thing. If you make a mistake, you can either close the driver and relaunch it using the code above, or you can manually click back to the beginning and try again.</p>
<p>Let’s try this for the following values:</p>
<ul class="simple">
<li><p>State: Illinois</p></li>
<li><p>Zip Code: 62401</p></li>
<li><p>County: Shelby</p></li>
<li><p>Yearly Household Income: $100,000</p></li>
<li><p>No coverage available</p></li>
<li><p>1 person in family</p></li>
<li><p>1 adult enrolling</p></li>
<li><p>Age of 60</p></li>
<li><p>No children enrolling</p></li>
</ul>
</section>
<section id="task-2-solution">
<h2>TASK 2 SOLUTION<a class="headerlink" href="#task-2-solution" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution here:</span>
</pre></div>
</div>
</div>
</div>
<p>And now we’ll see that we’ve successfully navigated to the page with the premium values we want to scrape, setting us up to use the code from last week’s BeautifulSoup workshop to actually get these values!</p>
</section>
<section id="looking-ahead">
<h2>Looking Ahead<a class="headerlink" href="#looking-ahead" title="Permalink to this headline">#</a></h2>
<p>Next week, we’ll see how to put this code into a bigger loop so that we can repeat it many times for various menu options. Some concepts that will be important next week:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">for</span></code> loops in Python</p></li>
<li><p>functions that prevent us from copy/pasting things 10 million times</p></li>
<li><p>Implicit and Explicit waits</p></li>
<li><p>Dictionaries and lists for storing values</p></li>
</ul>
<p>Helpful Review:</p>
<ul class="simple">
<li><p>Intro to Python Workshop: <a class="reference external" href="https://ui-research.github.io/python-at-urban/content/intro-to-python.html">https://ui-research.github.io/python-at-urban/content/intro-to-python.html</a>. The following sections are particularly relevant:</p>
<ul>
<li><p>Lists and Dictionaries (section 4a and 4b)</p></li>
<li><p>Loops (section 5)</p></li>
<li><p>Functions (section 6)</p></li>
</ul>
</li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="web-scraping-static.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Web Scraping with Static Pages</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="python-aws.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">AWS &amp; Python</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>